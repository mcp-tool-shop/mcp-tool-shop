---
interface Props {
  verified: boolean;
  concept: boolean;
  proofs: string[];
}

const { verified, concept, proofs = [] } = Astro.props;

const status = verified ? "verified" : concept ? "concept" : "unknown";
const statusLabels = {
  verified: "Verified Tool",
  concept: "Concept / Experimental",
  unknown: "Unverified Status"
};
const statusColors = {
  verified: "var(--sl-color-green-400)",
  concept: "var(--sl-color-orange-400)",
  unknown: "var(--sl-color-gray-400)"
};

const proofLabels: Record<string, string> = {
  ci: "CI Workflow Detected",
  npm: "Node.js (package.json)",
  cargo: "Rust (Cargo.toml)",
  maven: "Java (pom.xml)",
  dotnet: "C# (.NET Solution)",
  python: "Python (pyproject.toml)",
  docker: "Container (Dockerfile)"
};

const displayProofs = proofs.map(p => ({
  id: p,
  label: proofLabels[p] || `Build Asset: ${p}`,
  icon: p === 'ci' ? '‚úÖ' : 'üì¶'
}));
---

<div class={`reality-panel status-${status}`}>
  <div class="panel-header">
    <div class="status-badge">
      <span class="status-icon">
        {status === 'verified' ? '‚úÖ' : status === 'concept' ? 'üöß' : '‚ùì'}
      </span>
      <span class="status-label">{statusLabels[status]}</span>
    </div>
    {status === 'concept' && (
      <p class="concept-note">This tool is in early development. APIs may change.</p>
    )}
  </div>
  
  {displayProofs.length > 0 && (
    <div class="proofs-list">
      <h4>Detected Signals</h4>
      <ul>
        {displayProofs.map(proof => (
          <li class="proof-item">
            <span class="proof-icon">{proof.icon}</span>
            <span class="proof-label">{proof.label}</span>
          </li>
        ))}
      </ul>
    </div>
  )}
</div>

<style>
  .reality-panel {
    background: var(--sl-color-gray-6);
    border: 1px solid var(--sl-color-gray-5);
    border-radius: 8px;
    padding: 1rem;
    margin: 1.5rem 0;
  }

  .status-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: bold;
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
  }

  .status-verified { border-color: var(--sl-color-green-800); background: rgba(0, 255, 0, 0.05); }
  .status-concept { border-color: var(--sl-color-orange-800); background: rgba(255, 165, 0, 0.05); }

  .concept-note {
    font-size: 0.9rem;
    color: var(--sl-color-orange-300);
    margin: 0;
  }

  .proofs-list {
    margin-top: 1rem;
    border-top: 1px solid var(--sl-color-gray-5);
    padding-top: 0.5rem;
  }

  .proofs-list h4 {
    font-size: 0.9rem;
    text-transform: uppercase;
    color: var(--sl-color-gray-3);
    margin-bottom: 0.5rem;
  }

  .proofs-list ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
  }

  .proof-item {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.95rem;
    background: var(--sl-color-black);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    border: 1px solid var(--sl-color-gray-5);
  }
</style>